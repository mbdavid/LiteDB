# LiteDB v.2 - TODO

- Revisar help do Shell - saiu varias coisas
- FileLimit and Initial Size
- Revisar BsonArray.Length não faz cache
- ThreadSafe
- Unit tests
- New UserVersion. this.UserVersions(1, (db) => { .. })
- Shrink
- Migration tool

- Implementar DbRefAttribute
- O problema de Max do AutoInc - Que tal uma sequence na collection? NextId()   
- Colocar <BsonDocument> DbParams na header. _engine.GetParams(), _engine.SetParams(p) (limit 4k)


## Thread Safe / Process Safe
- Thread safe no BsonMapper static methods (Reflection)
- Lock total de read.
- Mesmo comandos de QUERY devem ter LOCK por causa do uso da CACHE (ou faço lock na cache?)            
- Revisar classes de servico/collection pra ver quais sao as variaveis de classe q mudam situacao (vide _cache)
- Avaliar uso do ConcurrentDictionary na cache

## Testes de Performance
- Fazer um script grande para testar no shell
- Focar no insert/delete/find?? FileStorage
- Testar sempre como release
- Sempre com journal?
===> Opções de melhorias
* Testar outros dicionarios na cache
* Testar BitConvert ao inves de unsafe
* PageSize 8K e 16K

## A pensar:

- Voltar UserVersion??
- Solução de Migrations (protected?)
    db.Migrations.Add(new Migration1());
- DefaultIndexOptions? Ou sem default - não cria indice automaticamente - ou full search?
- Folder root: "src", "test", "nuget"
- Encrypt datafile (EncryptDiskService : FileDiskService)
- Queria que o IDiskService não tivesse informações sobre Journal/Recovery
- Que tal ter a possibilidade utilizar serializacao de terceiros (via JSON.NET)? IBsonMapper?

- Como implementar pro DNX
- Mapeador/Configuration estilo EF
    db.Configuration.Add(new CredorConfiguration())

## V2 Features
- New DbEngine
- IDiskService
- New DbRef
- Entity<> mapper
- ThreadSafe
- New lock read/write
- Debugger
- Better journal : restore before crash 
- ACID per document/collections
- Lazy load
* ByteArray, DbEngine, abstract BasePage
- FileLimit and Initial Size
        
## Para versão 2

- Criar site simples, bacana, estilos:
    novo site mongodb
    http://pouchdb.com/ 
    vuejs.org https://github.com/vuejs/vuejs.org
    https://hexo.io/ (esse é bem simples e acho q atende bem)
- Fazer o web shell na mesma pagina (nem q seja via iframe)
- Colocar documentação neste site
- Logotipo + Nome
- Atualizar codeproject

## Modulos do LiteDB
- Core
- DbEngine
- QueryEngine
- Mapper
- Utils
    - Linq, shell, fileStorage, fts
- API
